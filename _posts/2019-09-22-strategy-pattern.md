---
published: true
layout: single
title: "Strategy Pattern"
category: book
tags: [Head First, design pattern, strategy pattern]
comments: false
---

> **μ¤νΈλν‹°μ§€ ν¨ν„΄(Strategy Pattern)**  
> μ•κ³ λ¦¬μ¦κµ°μ„ μ •μν•κ³  κ°κ°μ„ μΊ΅μν™”ν•μ—¬ κµν™ν•΄μ„ μ‚¬μ©ν• μ μλ„λ΅ λ§λ“ λ‹¤.  
> μ¤νΈλν‹°μ§€ ν¨ν„΄μ„ ν™μ©ν•λ©΄ μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ” ν΄λΌμ΄μ–ΈνΈμ™€λ” λ…λ¦½μ μΌλ΅ μ•κ³ λ¦¬μ¦μ„ λ³€κ²½ν•  μ μλ‹¤.

- μ¤λ¦¬ μ—°λ» μ‹λ®¬λ μ΄μ… κ²μ„μ„ λ§λ“ λ‹¤κ³  κ°€μ •ν•μ.

### ν‘μ¤€μ μΈ κ°μ²΄μ§€ν–¥ κΈ°λ²•μ„ μ‚¬μ©

- Duckμ΄λΌλ” μνΌν΄λμ¤λ¥Ό λ§λ“¤κ³  κ·Έ ν΄λμ¤λ¥Ό ν™•μ¥ν•΄ λ‹¤λ¥Έ λ¨λ“  μΆ…λ¥μ μ¤λ¦¬λ¥Ό λ§λ“ λ‹¤.  
  ![ν‘μ¤€μ μΈ κ°μ²΄μ§€ν–¥ κΈ°λ²• μ‚¬μ©](/assets/images/strategy_pattern_1.png)

### π¤·β€β™€οΈ μ¤λ¦¬λ“¤μ΄ λ‚ μ•„λ‹¤λ‹ μ μλ„λ΅ λ³€κ²½ν•΄μ£Όμ„Έμ”!

- Duckμ— fly() λ©”μ†λ“λ¥Ό μ¶”κ°€ν•κ³  λ¨λ“  μ„λΈν΄λμ¤μ—μ„ fly()λ¥Ό μƒμ†λ°›λ”λ‹¤.  
  ![fly() λ©”μ†λ“ μ¶”κ°€](/assets/images/strategy_pattern_2.png)

### π¤¦β€β™€οΈ RubberDuck(κ³ λ¬΄λ΅ λ μ¤λ¦¬ μΈν•)μ΄ λ‚ λΌλ‹¤λ‹λ‹¤?

- μνΌν΄λμ¤ Duckμ— fly λ©”μ†λ“κ°€ μ¶”κ°€λλ©΄μ„ μΌλ¶€ μ„λΈν΄λμ¤μ—λ” μ ν•©ν•μ§€ μ•μ€ ν–‰λ™μ΄ μ¶”κ°€λμ—λ‹¤.

```java
public abstract class Duck {
    public abstract void display();

    public void quack() {
        System.out.println("κ½¥κ½¥");
    }

    public void swim() {
        System.out.println("μ–΄ν‘Έμ–΄ν‘Έ");
    }

    public void fly() {
        System.out.println("ν›¨ν›¨");
    }
}

public class MallardDuck extends Duck {
    public void display() {
        System.out.println("λ‚λ” MarrardDuckμ΄λ‹¤");
    }
}

public class RedheadDuck extends Duck {
    public void display() {
        System.out.println("λ‚λ” RedheadDuckμ΄λ‹¤");
    }
}

public class RubberDuck extends Duck {
    public void display() {
        System.out.println("λ‚λ” RubberDuckμ΄λ‹¤");
    }

    public void quack() {
        System.out.println("μ‚‘μ‚‘");
    }

    public void fly() {
    }
}
```

- μ„μ RubberDuckμ™€ κ°™μ΄ fly() λ©”μ†λ“λ¥Ό μ¤λ²„λΌμ΄λ“ν• ν›„, μ•„λ¬΄κ²ƒλ„ ν•μ§€ μ•κ² ν•¨μΌλ΅μ¨ ν•΄κ²°ν•  μ μλ‹¤.
- ν•μ§€λ§, κ³„μ†ν•΄μ„ κ·κ²©μ΄ λ³€ν•λ‹¤λ©΄, μ „μ— μ¶”κ°€ν–λ μ„λΈν΄λμ¤μ fly(), quack() λ©”μ†λ“λ¥Ό μ‚΄ν΄λ΄μ•Ό ν•κ³ , μƒν™©μ— λ”°λΌ μ¤λ²„λΌμ΄λ“ν•΄μ•Ό ν•  μλ„ μλ‹¤.
- μƒμ†μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ¬λ°”λ¥Έ ν•΄κ²°μ±…μ΄ μ•„λ‹λ‹¤!

### π™‹β€β™€οΈ fly(), quack()λ¥Ό μΈν„°νμ΄μ¤λ΅ λ§λ“¤μ

- Duck μνΌν΄λμ¤μ—μ„ fly(), quack()μ„ λΉΌκ³  fly() λ©”μ†λ“κ°€ μλ” Flyable, quack() λ©”μ†λ“κ°€ μλ” Quackable μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤ μ μλ‹¤.  
  ![Flyable, Quackable μΈν„°νμ΄μ¤](/assets/images/strategy_pattern_3.png)
- κ³ λ¬΄ μ¤λ¦¬κ°€ λ‚ λΌλ‹¤λ‹λ” κ²ƒκ³Ό κ°™μ€ λ¬Έμ μ μ€ ν•΄κ²°ν•  μ μλ‹¤.
- μΈν„°νμ΄μ¤μ—λ” κµ¬ν„λ μ½”λ“κ°€ μ „ν€ λ“¤μ–΄κ°€μ§€ μ•λ”λ‹¤.
  - μ„λΈν΄λμ¤μ—μ„ fly(), quack()λ¥Ό κµ¬ν„ν•λ„λ΅ ν•¨μΌλ΅μ¨ μ½”λ“ μ¬μ‚¬μ©μ„ μ „ν€ κΈ°λ€ν•  μ μ—†λ‹¤.
    - λ‚ μ•„κ°€λ” λ™μ‘μ„ μ΅°κΈ λ°”κΎΈκΈ° μ„ν•΄ κ΄€λ ¨λ μ„λΈν΄λμ¤λ¥Ό μ°Ύμ•„ λ¨λ‘ κ³ μ³μ•Ό ν•λ‹¤.
    - κ³ μΉλ” κ³Όμ •μ—μ„ μƒλ΅μ΄ λ²„κ·Έκ°€ μƒκΈΈ κ°€λ¥μ„±λ„ μλ‹¤.

> **λ””μμΈ μ›μΉ™**  
> μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ‹¬λΌμ§€λ” λ¶€λ¶„μ„ μ°Ύμ•„λ‚΄κ³ , λ‹¬λΌμ§€μ§€ μ•λ” λ¶€λ¶„μΌλ΅λ¶€ν„° λ¶„λ¦¬μ‹ν‚¨λ‹¤.

### :bulb: λ°”λ€λ” λ¶€λ¶„κ³Ό κ·Έλ ‡μ§€ μ•μ€ λ¶€λ¶„ λ¶„λ¦¬ν•κΈ°

- μ½”λ“μ— μƒλ΅μ΄ μ”κµ¬μ‚¬ν•­μ΄ μμ„ λ•λ§λ‹¤ λ°”λ€λ” λ¶€λ¶„μ΄ μλ‹¤λ©΄, λ°”λ€μ§€ μ•λ” λ‹¤λ¥Έ λ¶€λ¶„μΌλ΅λ¶€ν„° κ³¨λΌλ‚΄μ„ λ¶„λ¦¬ν•΄μ•Ό ν•λ‹¤.

  - λ°”λ€λ” λ¶€λ¶„: fly(), quack()
  - λ°”λ€μ§€ μ•λ” λ¶€λ¶„: fly(), quack()λ¥Ό μ μ™Έν• Duck ν΄λμ¤

- λ°”λ€λ” ν–‰λ™μ„ κ°λΌλ‚΄κΈ° μ„ν•΄ κ° ν–‰λ™μ„ λ‚νƒ€λ‚Ό ν΄λμ¤ μ§‘ν•©μ„ μƒλ΅ λ§λ“ λ‹¤.

  - κ° ν΄λμ¤ μ§‘ν•©μ—λ” κ°κ°μ ν–‰λ™μ„ κµ¬ν„ν• κ²ƒμ„ μ „λ¶€ μ§‘μ–΄λ„£λ”λ‹¤.

- ν–‰λ™(behavior) μΈν„°νμ΄μ¤λ” ν–‰λ™ ν΄λμ¤μ—μ„ κµ¬ν„ν•λ‹¤.

  - Duck ν΄λμ¤μ—μ„λ” κ·Έ ν–‰λ™μ„ κµ¬μ²΄μ μΌλ΅ κµ¬ν„ν•λ” λ°©λ²•μ— λ€ν•΄μ„λ” λ” μ΄μƒ μ•κ³  μμ„ ν•„μ”κ°€ μ—†λ‹¤.

  - π¤·β€β™€οΈ ν–‰λ™λ§μ„ λ‚νƒ€λ‚΄λ” ν΄λμ¤λ¥Ό λ§λ“λ” κ² μΆ€ μ΄μƒν•΄μ”.
    - ν΄λμ¤λ” μΌλ°μ μΌλ΅ μƒνƒμ™€ λ©”μ†λ“λ¥Ό λ‘ λ‹¤ κ°€μ§€κ³  μλ‹¤.
    - ν–‰λ™μ—λ„ μƒνƒμ™€ λ©”μ†λ“κ°€ λ“¤μ–΄μμ„ μ μλ‹¤.
      - ex) λ‚λ” ν–‰λ™μ— ν–‰λ™μ μ†μ„±(1λ¶„λ‹Ή λ‚ κ°λ¥Ό ν„λ­μ΄λ” νμ, μµκ³  λ†’μ΄, μ†λ„ λ“±)μ„ λ‚νƒ€λ‚΄λ” μΈμ¤ν„΄μ¤ λ³€μλ¥Ό μ§‘μ–΄λ„£μ„ μλ„ μλ‹¤.

> **λ””μμΈ μ›μΉ™**  
> κµ¬ν„μ΄ μ•„λ‹ μΈν„°νμ΄μ¤μ— λ§μ¶°μ„ ν”„λ΅κ·Έλλ°ν•λ‹¤.

- μ‹¤μ  μ‹¤ν–‰μ‹μ— μ“°μ΄λ” κ°μ²΄κ°€ μ½”λ“μ— μν•΄ κ³ μ •λμ§€ μ•λ„λ΅, μ–΄λ–¤ μƒμ„ ν•μ‹μ— λ§μ¶°μ„ ν”„λ΅κ·Έλλ°ν•¨μΌλ΅μ¨ λ‹¤ν•μ„±μ„ ν™μ©ν•΄μ•Ό ν•λ‹¤λ” κ²ƒμ΄λ‹¤.
- λ³€μλ¥Ό μ„ μ–Έν•  λ•λ” λ³΄ν†µ μ¶”μƒ ν΄λμ¤λ‚ μΈν„°νμ΄μ¤ κ°™μ€ μƒμ„ ν•μ‹μΌλ΅ μ„ μ–Έν•΄μ•Ό ν•λ‹¤.

  - μƒμ„ ν΄λμ¤λ¥Ό κµ¬ν„ν• ν•μ‹μ΄λ©΄ μ–΄λ–¤ κ°μ²΄λ“  μ§‘μ–΄λ„£μ„ μ μλ‹¤.
  - ν•΄λ‹Ή λ³€μλ¥Ό μ„ μ–Έν•λ” ν΄λμ¤μ—μ„λ” μ‹¤μ  κ°μ²΄μ ν•μ‹μ„ λ°λΌλ„ λλ‹¤.

- [1] κµ¬ν„μ— λ§μ¶°μ„ ν”„λ΅κ·Έλλ°

```java
Dog d = new Dog();
d.bark();
```

- [2] μΈν„°νμ΄μ¤/μƒμ„ ν•μ‹μ— λ§μ¶°μ„ ν”„λ΅κ·Έλλ°

```java
Animal animal = new Dog();
animal.makeSound();
```

- [3] κµ¬μ²΄μ μΌλ΅ κµ¬ν„λ κ°μ²΄λ¥Ό μ‹¤ν–‰μ‹μ— λ€μ…

```java
a = getAnimal();
a.makeSound();
```

<br>
![ν–‰λ™ μΈν„°νμ΄μ¤, ν΄λμ¤](/assets/images/strategy_pattern_4.png)

#### λ°”λ€λ” λ¶€λ¶„κ³Ό κ·Έλ ‡μ§€ μ•μ€ λ¶€λ¶„ λ¶„λ¦¬ν–μ„ λ•, μ¥μ 

- λ‹¤λ¥Έ ν•μ‹μ κ°μ²΄μ—μ„λ„ λ‚λ” ν–‰λ™κ³Ό κ½¥κ½¥κ±°λ¦¬λ” ν–‰λ™μ„ μ¬μ‚¬μ©ν•  μ μλ‹¤.
- μƒλ΅μ΄ ν–‰λ™μ„ μ‰½κ² μ¶”κ°€ν•  μ μλ‹¤.

  - κΈ°μ΅΄μ ν–‰λ™ ν΄λμ¤λ¥Ό μμ •ν•μ§€ μ•μ
  - Duck ν΄λμ¤λ¥Ό μ „ν€ κ±΄λ“λ¦¬μ§€ μ•μ

### Duck ν–‰λ™ ν†µν•©ν•κΈ°

- Duck ν΄λμ¤μ— μΈν„°νμ΄μ¤ ν•μ‹μ μΈμ¤ν„΄μ¤ λ³€μλ¥Ό μ¶”κ°€ν•λ‹¤.

  - μ΄λ•, Duck ν΄λμ¤ λ‚΄μ—μ„ μ •μν• fly(), quack() λ©”μ†λ“λ” μ‚­μ ν•λ‹¤.  
     ![ν–‰λ™ μΈν„°νμ΄μ¤κ°€ μ¶”κ°€λ Duck ν΄λμ¤](/assets/images/strategy_pattern_5.png)

- performQuack()μ„ κµ¬ν„ν•μ.
  - ν–‰λ™ μΈν„°νμ΄μ¤ QuackBehaviorμ— μν•΄ μ°Έμ΅°λλ” κ°μ²΄μ—μ„ κ½¥κ½¥κ±°λ¦¬λ” ν–‰λ™μ„ ν•λ„λ΅ ν•λ‹¤.
  - κ°μ²΄μ μΆ…λ¥μ—λ” μ‹ κ²½ μ“Έ ν•„μ”κ°€ μ—†λ‹¤.

```java
public class Duck {
    FlyBehavior flyBehavior;
    QuackBehavior quackBehavior;

    public void performFly() {
        flyBehavior.fly();
    }
    public void performQuack() {
        quackBehavior.quack(); // ν–‰λ™ ν΄λμ¤μ— μ„μ„ν•λ‹¤.
    }
}
```

- Duckμ μ„λΈν΄λμ¤μ μΈμ¤ν„΄μ¤κ°€ μƒμ„±λ  λ•, μƒμ„±μμ—μ„λ” ν–‰λ™ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μΈμ¤ν„΄μ¤ λ³€μμ— λ€μ…ν•λ‹¤.
  - ex) flyBehavior μΈμ¤ν„΄μ¤ λ³€μμ— FlyWithWings ν•μ‹μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤μ–΄μ„ λ€μ…ν•λ‹¤.

```java
public class MallardDuck extends Duck {
    public MallardDuck() {
        flyBehavior = new FlyWithWings();
        quackBehavior = new Quack();
    }

    public void display() {
        System.out.println('λ‚λ” MallardDuckμ…λ‹λ‹¤.');
    }
}
```

- setter λ©”μ†λ“λ¥Ό ν†µν•΄ λ™μ μΌλ΅ ν–‰λ™μ„ μ§€μ •ν•λ‹¤.
  - μ‹¤ν–‰μ‹ ν–‰λ™μ„ λ°”κΎΈκ³  μ‹¶λ‹¤λ©΄, μ›ν•λ” ν–‰λ™μ setter λ©”μ†λ“λ¥Ό νΈμ¶ν•λ©΄ λλ‹¤.

```java
public class ModelDuck extends Duck {
    public ModelDuck() {
        flyBehavior = new FlyWithWings();
        quackBehavior = new Quack();
    }

    public void display() {
        System.out.println('λ‚λ” ModelDuckμ…λ‹λ‹¤.');
    }

    public void setFlyBehavior(FlyBehavior fb) {
        flyBehavior = fb;
    }

    public void setQuackBehavior(QuackBehavior qb) {
        quackBehavior = qb;
    }
}

public class MiniDuckSimulator {
    public static void main(String[] args) {
        Duck model = new ModelDuck();
        model.performFly(); // FlyWithWings μ‹¤ν–‰
        model.setFlyBehavior(new FlyNoWay());
        model.performFly(); // FlyNoWay μ‹¤ν–‰
    }
}
```

### π’β€β™€ Aμ—λ” Bκ°€ μλ‹¤.

- λ‘ ν΄λμ¤λ¥Όν•©μΉλ” κ²ƒ = **κµ¬μ„±(Composition)**
  - Duck ν΄λμ¤μ—μ„λ” ν–‰λ™μ„ μƒμ†λ°›λ” λ€μ‹ , μ¬λ°”λ¥Έ ν–‰λ™ κ°μ²΄λ΅ κµ¬μ„±λ¨μΌλ΅μ¨ ν–‰λ™μ„ λ¶€μ—¬λ°›κ² λλ‹¤.

> **λ””μμΈ μ›μΉ™**  
> μƒμ†λ³΄λ‹¤λ” κµ¬μ„±μ„ ν™μ©ν•λ‹¤.

- κµ¬μ„±μ„ μ΄μ©ν•΄ μ‹μ¤ν…μ„ λ§λ“¤λ©΄ μ μ—°μ„±μ„ ν¬κ² ν–¥μƒμ‹ν‚¬ μ μλ‹¤.
  - μ•κ³ λ¦¬μ¦κµ°μ„ λ³„λ„μ ν΄λμ¤μ μ§‘ν•©μΌλ΅ μΊ΅μν™”ν•  μ μλ„λ΅ λ§λ“¤μ–΄μ¤€λ‹¤.
  - μ‹¤ν–‰μ‹μ— ν–‰λ™μ„ λ°”κΏ€ μ μκ² ν•΄μ¤€λ‹¤.
