---
published: true
layout: single
title: "Clean Code 5장"
category: book
tags: [clean code]
comments: false
---

# 5장 형식 맞추기

> 코드 형식을 맞추기 위한 간단한 규칙을 정하고 따라야 한다.

## 형식을 맞추는 목적

- 융통성 없이 맹목적으로 따르면 안 된다.
- 코드 형식 = 의사소통의 일환
- 원래 코드는 사라질지라도 개발자의 스타일과 규율은 사라지지 않는다.
  - 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 영향을 미친다.

## 적절한 행 길이를 유지하라

- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

### 신문 기사처럼 작성하라

- 이름은 간단하면서도 설명이 가능하게 짓는다.
  - 이름만 보고도 올바른 모듈을 살펴보고 있는지 판단할 정도
- 소스 파일은 고차원 개념/알고리즘 -> 저차원 함수/세부 내역이 나오도록 구성한다.
  - 아래로 내려갈수록 의도를 세세하게 묘사한다.

### 개념은 빈 행으로 분리하라

- 각 행은 수식이나 절을 나타낸다.
- 일련의 행 묶음은 완결된 생각 하나를 표현한다.
- 생각 사이는 빈 행을 넣어 분리해야 한다.
- 빈 행 = **새로운 개념**을 시작한다는 시각적 단서

### 세로 밀집도

- 세로 밀집도 = **연관성**
  - 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다.
- 코드가 한눈에 들어오도록 도와준다.

### 수직 거리

- 서로 밀접한 개념은 한 파일에 속해야 마땅하다.
  - protected 변수를 피해야 하는 이유 중 하나
    - 접근 제어자?
      - **public**: 모든 클래스에 접근 가능
      - **protected**: 동일 패키지이거나 하위 클래스 관계에 있는 경우 접근 가능
      - **default**: 동일 패키지인 경우 접근 가능
      - **private**: 자기 자신 클래스 내에서만 접근 가능
- 연관성?
  - 한 개념을 이해하는 데 다른 개념이 중요한 정도
- 밀접한 연관성을 가지는 개념은 세로 거리로 연관성을 표현한다.
- 연관성이 깊은 두 개념이 멀리 떨어져 있는 경우, 코드를 읽는사람이 소스 파일과 클래스를 여기저기 뒤지게 된다.

**1. 변수 선언**

- 사용하는 위치에 최대한 가까이 선언
- 지역 변수는 각 함수 맨 처음에 선언한다.
- 루프를 제어하는 변수는 루프 문 내부에 선언한다.
- 드물지만, 다소 긴 함수에서는 블록 상단이나 루프 직전에 변수를 선언하는 사례도 있다.

**2. 인스턴스 변수**

- 클래스 맨 처음에 선언한다. (Java)  
  클래스 마지막에 선언한다. = 가위 규칙 (C++)
- 변수 간에 세로로 거리를 두지 않는다.
  - 인스턴스 변수를 모아둔다.

**3. 종속 함수**

- 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다.
- 가능한 호출하는 함수를 호출되는 함수보다 먼저 배치한다.
  - 가독성이 높아진다 = 자연스럽게 읽힌다.
  - 방금 호출한 함수가 잠시 후 정의되리라는 사실을 예측할 수 있다.

**4. 개념적 유사성**

- 개념적인 친화도가 높을수록 코드를 가까이 배치한다.
- 친화도가 높은 요인
  - 한 함수가 다른 함수를 호출해 생기는 직접적인 종속성
  - 변수와 그 변수를 사용하는 함수
  - 비슷한 동작을 수행하는 일군의 함수

### 세로 순서

- 함수 호출 종속성은 아래 방향으로 유지한다.
  - 호출되는 함수를 호출하는 함수보다 나중에 배치한다.
  - 소스 코드 모듈이 고차원 -> 저차원으로 자연스럽게 내려간다.

## 가로 형식 맞추기

- 짧은 행이 바람직하다.

### 가로 공백과 밀집도

- 공백을 통해 밀접한 개념과 느슨한 개념을 표현한다.
- 할당문에서의 공백
  - 왼쪽 요소와 오른쪽 요소가 분명히 나뉜다.
  - `String name = "mindock"`
- 함수 선언에서의 함수 이름과 이어지는 괄호 사이에는 공백을 넣지 않는다.
  - 함수와 인수는 밀접하기 때문
  - 공백을 넣으면, 별개 개념으로 보인다.
  - `public int sum(int a, int b)`
- 함수 호출에서 괄호 안 인수간 공백
  - 쉼표를 강조해 인수가 별개라는 사실을 강조
  - `sum(1, 4)`
- 연산자 우선순위를 강조하기 위한 공백

### 가로 정렬

- 코드가 엉뚱한 부분을 강조해 진짜 의도가 가려진다.

### 들여쓰기

- 범위로 이뤄진 계층을 표현하기 위해 들여쓰기가 필요하다.
- 들여쓰는 정도는 계층에서 코드가 자리잡은 수준에 비례한다.
  - 파일 수준인 문장(ex 클래스 정의)는 들여쓰지 않는다.
  - 클래스 내 메서드는 클래스보다 한 수준 들여쓴다.
  - 메서드 코드는 메서드 선언보다 한 수준 들여쓴다.
  - 블록 코드는 블록을 포함하는 코드보다 한 수준 들여쓴다.

## 팀 규칙

- 소프트웨어가 일관적인 스타일을 보이도록 해야한다.
  - 팀은 한 가지 규칙을 합의한다.
  - 모든 팀원은 그 규칙을 따라야 한다.
- 스타일은 일관적이고 매끄러워야 한다.
- 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야 한다.
